# AI视频助手项目介绍

## 项目概述

AI视频助手是一个基于视频内容的智能语音转文本和检索系统，支持用户上传任意视频，通过多模态技术栈实现"视频内容解析-音频提取-语音识别-向量检索-智能问答"全流程自动化，最终输出精准的视频转写结果、多种格式的字幕文件和基于内容的智能检索功能。

## 核心需求

基于视频内容的大模型驱动型问答系统，支持用户上传任意视频，通过多模态技术栈实现：
- 视频内容解析
- 文本化转换  
- 智能检索
- 对话式问答

全流程自动化，最终输出精准的视频摘要与多轮QA问答结果。

## 技术架构

### 1. 对话式检索链
- 使用HuggingFace的模型和工具链实现循环对话
- 用户输入问题，模型基于检索到的信息生成问答
- 支持多轮对话，保持上下文连贯性

### 2. 视频音频提取
- 采用OpenAI Whisper语音识别模型
- 将语音音频转换成文本，提取主讲人内容
- 兼容多个语言模型，提高音频提取准确性
- 支持多种视频格式：MP4, AVI, MKV, MOV, WMV, FLV, WebM

### 3. 多层次检索系统
- 建立融合检索器，结合多种检索策略
- 使用不同的检索器进行检索并融合结果
- 配置LLM模型，结合向量检索和BM25检索算法
- 通过生成多样化的查询来提高检索准确性

## 处理流程

```
上传视频 → 生成视频日志 → 内容翻译 → 实时问答 → 新的对话
```

具体实现：
1. **视频上传**：支持多种视频格式的上传和验证
2. **视频语音转文字**：使用Whisper模型进行语音识别
3. **文字翻译**：多语言支持和翻译功能
4. **实时问答**：基于检索结果的智能问答
5. **对话管理**：支持多轮对话和上下文维护

## 已实现功能

### ✅ 视频处理模块
- 视频加载和合法性校验
- 音频提取和格式转换
- 支持多种视频编码格式

### ✅ 语音识别模块  
- OpenAI Whisper多模型支持（tiny/base/small/medium/large）
- 99种语言自动识别
- GPU/CPU自动检测和加速
- 时间戳精确对齐

### ✅ 文本处理模块
- **文本清洗**：去除填充词、规范化标点
- **文本分段**：按句子/时间/语义分段
- **文本翻译**：基于Googletrans的多语言翻译
- 支持批量处理和缓存机制

### ✅ 检索系统模块
- **向量存储**：基于sentence-transformers的语义检索
- **BM25检索**：关键词精确匹配检索
- 索引持久化和快速加载
- 支持混合检索（开发中）

### ✅ 文件管理模块
- 多格式输出：JSON/TXT/SRT/VTT
- 完整的元数据保存
- 自动文件组织和命名

## 开发规范

### 1. TodoList审查制度
- 开发前必须先提供详细的TodoList供审查
- TodoList应包含明确的任务分解和优先级
- 未经审查确认不得开始开发工作

### 2. 逐步开发原则
- 严格按照TodoList逐步完成，不得跳步或并行处理
- 每完成一个TodoList项后需等待审查确认
- 确保每个步骤都可追溯和验证，防止错误堆积

### 3. 单元测试要求
- 每完成一定功能模块后必须编写单元测试
- 测试应覆盖核心功能和边界情况
- 采用产品级测试标准，确保代码质量

### 4. 变更审批流程
- 创建新脚本或文件前必须提前告知并获取批准
- 重要操作和修改需事先说明并获得同意
- 所有变更都应有明确的开发目的和预期效果

### 5. 问题解决规范
- 解决bug、环境问题或依赖冲突时，必须先制定解决计划并告知
- 修改系统配置、依赖版本或核心文件前需获得批准
- 紧急问题处理需记录操作步骤，事后补充文档和测试

## 技术选型

### 核心框架
- **Python 3.10+**：主要开发语言
- **PyTorch**：深度学习框架
- **OpenCV**：视频处理
- **FFmpeg**：音视频处理

### 机器学习
- **OpenAI Whisper**：语音识别
- **Sentence-Transformers**：文本向量化
- **Transformers**：HuggingFace模型库
- **Googletrans**：文本翻译

### 数据处理
- **NumPy**：数值计算
- **SciPy**：科学计算
- **Pandas**：数据处理
- **Scikit-learn**：机器学习工具

## 性能指标

| 功能模块 | 处理速度 | 准确性 | 内存占用 |
|---------|---------|--------|---------|
| 视频处理 | 1x-2x实时 | - | 中等 |
| 语音识别 | 0.5x-2x实时 | 95%+ | 高 |
| 文本处理 | >10x实时 | - | 低 |
| 向量检索 | <10ms | 语义匹配 | 中等 |
| BM25检索 | <2ms | 精确匹配 | 低 |

## 部署要求

### 最低配置
- **CPU**: 4核心以上
- **内存**: 8GB以上
- **存储**: 10GB可用空间
- **系统**: Windows/Linux/macOS

### 推荐配置
- **GPU**: NVIDIA GTX 1060以上（6GB显存）
- **CPU**: 8核心以上
- **内存**: 16GB以上
- **存储**: 50GB可用空间（SSD推荐）

## 未来规划

### 短期目标
1. 完成混合检索器实现
2. 实现多查询生成功能
3. 完善配置管理系统
4. 开发Web API接口

### 中期目标
1. 实现完整的问答系统
2. 开发Web前端界面
3. 支持实时视频流处理
4. 添加用户管理系统

### 长期目标
1. 多模态内容理解
2. 个性化推荐系统
3. 知识图谱构建
4. 企业级部署方案

## 团队协作

根据现有设备能力（笔记本电脑或云平台）合理选型，可简化功能实现项目的部分功能。

团队协作按照项目开发流程进行：
1. 需求分析与技术选型
2. 环境搭建与结构化设计
3. 迭代开发（遵循代码规范）
4. 单元测试保障质量
5. 集成测试与优化
6. 打包部署与文档编写
7. 持续维护与迭代

全程以规范化、可追溯、高质量为核心原则。

---

**注意**：本项目严格遵循开发规范，确保每个功能模块都经过充分测试和审查，保证系统的稳定性和可维护性。