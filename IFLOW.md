# AIè§†é¢‘åŠ©æ‰‹é¡¹ç›® - iFlow ä¸Šä¸‹æ–‡æ–‡ä»¶

## é¡¹ç›®æ¦‚è¿°

AIè§†é¢‘åŠ©æ‰‹æ˜¯ä¸€ä¸ªåŸºäºè§†é¢‘å†…å®¹çš„æ™ºèƒ½è¯­éŸ³è½¬æ–‡æœ¬å’Œæ£€ç´¢ç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·ä¸Šä¼ ä»»æ„è§†é¢‘ï¼Œé€šè¿‡å¤šæ¨¡æ€æŠ€æœ¯æ ˆå®ç°"è§†é¢‘å†…å®¹è§£æ-éŸ³é¢‘æå–-è¯­éŸ³è¯†åˆ«-å¤šæŸ¥è¯¢ç”Ÿæˆ-æ··åˆæ£€ç´¢-æ™ºèƒ½é—®ç­”"å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæœ€ç»ˆè¾“å‡ºç²¾å‡†çš„è§†é¢‘è½¬å†™ç»“æœã€å¤šç§æ ¼å¼çš„å­—å¹•æ–‡ä»¶å’ŒåŸºäºå†…å®¹çš„æ™ºèƒ½æ£€ç´¢åŠŸèƒ½ã€‚

## æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **è§†é¢‘å¤„ç†**: OpenCV, FFmpeg
- **è¯­éŸ³è¯†åˆ«**: OpenAI Whisper (æ”¯æŒå¤šè¯­è¨€)
- **éŸ³é¢‘å¤„ç†**: FFmpeg-python
- **æ–‡æœ¬å‘é‡åŒ–**: Sentence-Transformers (all-MiniLM-L6-v2)
- **å‘é‡æ£€ç´¢**: NumPy, SciPy
- **æ··åˆæ£€ç´¢**: å‘é‡æ£€ç´¢ + BM25ç®—æ³•èåˆ
- **å¤šæŸ¥è¯¢ç”Ÿæˆ**: åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„æŸ¥è¯¢æ‰©å±•
- **åç«¯æ¡†æ¶**: Python 3.10+
- **æœºå™¨å­¦ä¹ **: PyTorch, Transformers, HuggingFace Hub
- **æ–‡æœ¬ç¿»è¯‘**: Googletrans
- **LLMé›†æˆ**: è®¯é£æ˜Ÿç«API (OpenAIå…¼å®¹æ¥å£)
- **éƒ¨ç½²**: Docker + Flask (å¾…å®Œå–„)

## é¡¹ç›®ç»“æ„

```
Video_Assistant/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£ - è§†é¢‘åˆ°æ–‡æœ¬å¤„ç†æµæ°´çº¿
â”œâ”€â”€ test_pipeline.py        # åç«¯æµç¨‹æµ‹è¯•è„šæœ¬
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README_backend.md      # åç«¯ç³»ç»Ÿè¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ é¡¹ç›®ä»‹ç».md             # ä¸­æ–‡é¡¹ç›®ä»‹ç»
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ modules/               # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ video/            # è§†é¢‘å¤„ç†æ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ video_loader.py     # è§†é¢‘åŠ è½½å’ŒéªŒè¯
â”‚   â”‚   â””â”€â”€ audio_extractor.py  # éŸ³é¢‘æå–
â”‚   â”œâ”€â”€ speech/           # è¯­éŸ³è¯†åˆ«æ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ whisper_asr.py      # Whisperè¯­éŸ³è¯†åˆ«
â”‚   â”‚   â””â”€â”€ multimodal_refine.py # å¤šæ¨¡æ€ä¼˜åŒ–
â”‚   â”œâ”€â”€ text/             # æ–‡æœ¬å¤„ç†æ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ segmenter.py        # æ–‡æœ¬åˆ†æ®µ
â”‚   â”‚   â”œâ”€â”€ text_cleaner.py     # æ–‡æœ¬æ¸…ç†
â”‚   â”‚   â””â”€â”€ translator.py       # æ–‡æœ¬ç¿»è¯‘
â”‚   â”œâ”€â”€ retrieval/        # æ£€ç´¢ç³»ç»Ÿæ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ vector_store.py     # å‘é‡å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ bm25_retriever.py   # BM25æ£€ç´¢å™¨
â”‚   â”‚   â”œâ”€â”€ hybrid_retriever.py # æ··åˆæ£€ç´¢å™¨
â”‚   â”‚   â””â”€â”€ multi_query.py      # å¤šæŸ¥è¯¢ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ qa/               # é—®ç­”ç³»ç»Ÿæ¨¡å— âœ…
â”‚   â”‚   â”œâ”€â”€ conversation_chain.py # å¯¹è¯é“¾
â”‚   â”‚   â”œâ”€â”€ conversation_data.py # å¯¹è¯æ•°æ®ç»“æ„
â”‚   â”‚   â”œâ”€â”€ memory.py           # è®°å¿†ç®¡ç†
â”‚   â”‚   â””â”€â”€ prompt.py           # æç¤ºæ¨¡æ¿
â”‚   â””â”€â”€ utils/            # å·¥å…·æ¨¡å— âœ…
â”‚       â”œâ”€â”€ file_manager.py     # æ–‡ä»¶ç®¡ç†
â”‚       â”œâ”€â”€ file_utils.py       # æ–‡ä»¶å·¥å…·
â”‚       â””â”€â”€ logger.py           # æ—¥å¿—ç®¡ç†
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ model_config.yaml # æ¨¡å‹é…ç½®
â”‚   â”œâ”€â”€ settings.py       # ç³»ç»Ÿè®¾ç½®
â”‚   â””â”€â”€ qa_examples.json # QAç¤ºä¾‹é…ç½®
â”œâ”€â”€ data/                 # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw_videos/       # åŸå§‹è§†é¢‘æ–‡ä»¶
â”‚   â”œâ”€â”€ transcripts/      # è½¬å†™ç»“æœ
â”‚   â”œâ”€â”€ cache/           # ç¼“å­˜ç›®å½•
â”‚   â”œâ”€â”€ memory/          # è®°å¿†å­˜å‚¨
â”‚   â””â”€â”€ vectors/         # å‘é‡ç´¢å¼•
â”œâ”€â”€ models/               # æ¨¡å‹ç¼“å­˜ç›®å½• âœ…
â”‚   â”œâ”€â”€ sentence-transformers/  # å‘é‡æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ whisper/              # Whisperæ¨¡å‹æ–‡ä»¶
â”‚   â””â”€â”€ llm/                   # LLMæ¨¡å‹ç¼“å­˜
â”œâ”€â”€ deploy/               # éƒ¨ç½²ç›¸å…³(å¾…å¼€å‘)
â”‚   â”œâ”€â”€ app.py           # Flaskåº”ç”¨
â”‚   â””â”€â”€ Dockerfile       # Dockeré…ç½®
â””â”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶ âœ…
    â”œâ”€â”€ test_asr.py      # ASRæµ‹è¯•
    â”œâ”€â”€ test_qa.py       # QAæµ‹è¯•
    â”œâ”€â”€ test_qa_system.py # QAç³»ç»Ÿé›†æˆæµ‹è¯•
    â”œâ”€â”€ test_retrieval.py # æ£€ç´¢æµ‹è¯•
    â”œâ”€â”€ test_vector_store.py # å‘é‡å­˜å‚¨æµ‹è¯•
    â”œâ”€â”€ test_bm25_retriever.py # BM25æ£€ç´¢æµ‹è¯•
    â”œâ”€â”€ test_hybrid_retriever.py # æ··åˆæ£€ç´¢æµ‹è¯•
    â”œâ”€â”€ test_multi_query.py # å¤šæŸ¥è¯¢æµ‹è¯•
    â””â”€â”€ test_retrieval_integration.py # æ£€ç´¢é›†æˆæµ‹è¯•
```

## æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### 1. è§†é¢‘å¤„ç†æµæ°´çº¿ âœ…
```
è§†é¢‘æ–‡ä»¶è¾“å…¥
    â†“
è§†é¢‘åˆæ³•æ€§æ ¡éªŒ (VideoLoader)
    â†“
éŸ³é¢‘æå– (AudioExtractor)
    â†“
Whisperè¯­éŸ³è¯†åˆ« (WhisperASR)
    â†“
å¤šæ ¼å¼ç»“æœä¿å­˜ (FileManager)
```

### 2. æ–‡æœ¬å¤„ç†æµç¨‹ âœ…
```
åŸå§‹è½¬å†™æ–‡æœ¬
    â†“
æ–‡æœ¬æ¸…æ´— (TextCleaner) - å»é™¤å¡«å……è¯ã€è§„èŒƒåŒ–æ ‡ç‚¹
    â†“
æ–‡æœ¬åˆ†æ®µ (TextSegmenter) - æŒ‰å¥å­/æ—¶é—´/è¯­ä¹‰åˆ†æ®µ
    â†“
æ–‡æœ¬ç¿»è¯‘ (Translator) - å¤šè¯­è¨€æ”¯æŒ
    â†“
å¤„ç†ç»“æœä¿å­˜
```

### 3. å¤šæŸ¥è¯¢ç”Ÿæˆæµç¨‹ âœ…
```
ç”¨æˆ·æŸ¥è¯¢
    â†“
æ¨¡å‹æ‰©å±•å™¨ (ModelBasedExpander)
    â†“
è¯­ä¹‰ç›¸ä¼¼æŸ¥è¯¢ç”Ÿæˆ
    â†“
å…³é”®è¯æ‰©å±•
    â†“
æŸ¥è¯¢æƒé‡åˆ†é…
    â†“
ç”Ÿæˆ10ä¸ªæ‰©å±•æŸ¥è¯¢
```

### 4. æ··åˆæ£€ç´¢æµç¨‹ âœ…
```
æ‰©å±•æŸ¥è¯¢åˆ—è¡¨
    â†“
å¹¶è¡Œæ£€ç´¢:
  - å‘é‡è¯­ä¹‰æ£€ç´¢ (VectorStore)
  - BM25å…³é”®è¯æ£€ç´¢ (BM25Retriever)
    â†“
ç»“æœèåˆ (åŠ æƒå¹³å‡/RRF/Condorcet)
    â†“
æ’åºå’Œå»é‡
    â†“
è¿”å›ç›¸å…³æ–‡æ¡£
```

### 5. æ™ºèƒ½é—®ç­”æµç¨‹ âœ…
```
ç”¨æˆ·æŸ¥è¯¢
    â†“
å¤šæŸ¥è¯¢ç”Ÿæˆ (MultiQueryGenerator)
    â†“
æ··åˆæ£€ç´¢ (HybridRetriever)
    â†“
å¯¹è¯é“¾ç®¡ç† (ConversationChain)
    â†“
è®°å¿†ç®¡ç† (Memory)
    â†“
æç¤ºæ¨¡æ¿ (PromptTemplate)
    â†“
LLMç”Ÿæˆå›ç­” (è®¯é£æ˜Ÿç«API)
    â†“
è¿”å›å›ç­”å’Œæ£€ç´¢ç»“æœ
```

## å®‰è£…å’Œè¿è¡Œ

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# åˆ›å»ºcondaç¯å¢ƒ (æ¨è)
conda create -n video_assistant python=3.10
conda activate video_assistant

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…ç³»ç»Ÿä¾èµ– (FFmpeg)
# Windows: ä¸‹è½½å¹¶æ·»åŠ åˆ°PATH
# macOS: brew install ffmpeg
# Ubuntu: sudo apt install ffmpeg

# å®‰è£…ä¸­æ–‡åˆ†è¯å·¥å…· (æ¨è)
pip install jieba nltk
```

### 2. åŸºæœ¬ä½¿ç”¨
```bash
# å¤„ç†å•ä¸ªè§†é¢‘æ–‡ä»¶
python main.py --video /path/to/video.mp4 --model base

# æŒ‡å®šè¾“å‡ºç›®å½•
python main.py --video /path/to/video.mp4 --output ./output

# ä½¿ç”¨ä¸åŒå¤§å°çš„æ¨¡å‹
python main.py --video /path/to/video.mp4 --model small
```

### 3. æµ‹è¯•ç³»ç»Ÿ
```bash
# è¿è¡ŒåŸºç¡€æµæ°´çº¿æµ‹è¯•
python test_pipeline.py

# è¿è¡ŒQAç³»ç»Ÿå®Œæ•´æµ‹è¯•
python tests/test_qa_system.py

# è¿è¡Œæ‰€æœ‰æ£€ç´¢æµ‹è¯•
python tests/test_retrieval.py

# è¿è¡Œå¤šæŸ¥è¯¢æµ‹è¯•
python tests/test_multi_query.py
```

## æ¨¡å‹é€‰æ‹©æŒ‡å—

### Whisperè¯­éŸ³è¯†åˆ«æ¨¡å‹
| æ¨¡å‹ | å¤§å° | é€Ÿåº¦ | å‡†ç¡®æ€§ | é€‚ç”¨åœºæ™¯ |
|------|------|------|--------|----------|
| tiny | 75MB | æœ€å¿« | åŸºç¡€ | å¿«é€Ÿæµ‹è¯• |
| base | 142MB | å¿«é€Ÿ | è‰¯å¥½ | æ—¥å¸¸ä½¿ç”¨ |
| small | 466MB | ä¸­ç­‰ | è¾ƒå¥½ | å¹³è¡¡é€‰æ‹© |
| medium | 1.5GB | è¾ƒæ…¢ | å¾ˆå¥½ | é«˜è´¨é‡éœ€æ±‚ |
| large | 2.9GB | æœ€æ…¢ | æœ€ä½³ | ä¸“ä¸šç”¨é€” |

### å‘é‡åŒ–æ¨¡å‹
| æ¨¡å‹ | å¤§å° | å‘é‡ç»´åº¦ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|------|----------|
| all-MiniLM-L6-v2 | 90MB | 384 | è½»é‡çº§ï¼Œå¤šè¯­è¨€ | é€šç”¨è¯­ä¹‰æ£€ç´¢ |

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### å¤šæŸ¥è¯¢ç”Ÿæˆå™¨ (MultiQueryGenerator)

#### åŠŸèƒ½ç‰¹ç‚¹
- **çº¯æ¨¡å‹é©±åŠ¨**: åŸºäºsentence-transformersçš„è¯­ä¹‰ç†è§£
- **å¤šè¯­è¨€æ”¯æŒ**: è‡ªåŠ¨è¯†åˆ«ä¸­è‹±æ–‡ï¼Œç”Ÿæˆç›¸åº”æ¨¡æ¿
- **æ™ºèƒ½æ‰©å±•**: ç”Ÿæˆè¯­ä¹‰ç›¸ä¼¼çš„æŸ¥è¯¢å˜ä½“
- **æ€§èƒ½ä¼˜åŒ–**: æœ¬åœ°æ¨¡å‹ç¼“å­˜ï¼Œ0.03ç§’ç”Ÿæˆ10ä¸ªæŸ¥è¯¢

#### ä½¿ç”¨ç¤ºä¾‹
```python
from modules.retrieval.multi_query import MultiQueryGenerator

# åˆ›å»ºå¤šæŸ¥è¯¢ç”Ÿæˆå™¨
generator = MultiQueryGenerator(
    max_queries=10,
    cache_dir="./models"
)

# ç”Ÿæˆæ‰©å±•æŸ¥è¯¢
result = generator.generate_queries("ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ")
print(f"ç”Ÿæˆäº† {len(result.generated_queries)} ä¸ªæŸ¥è¯¢")

# æŸ¥çœ‹ç”Ÿæˆçš„æŸ¥è¯¢
for i, query in enumerate(result.generated_queries):
    print(f"{i+1}. {query.query} [æƒé‡: {query.weight:.3f}]")
```

#### ç”Ÿæˆçš„æŸ¥è¯¢ç¤ºä¾‹
å¯¹äºæŸ¥è¯¢"ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"ï¼Œç³»ç»Ÿä¼šç”Ÿæˆï¼š
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ" (åŸå§‹æŸ¥è¯¢)
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„å·¥ä½œåŸç†"
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„å®ç°æ–¹æ³•"
- "å¦‚ä½•ç†è§£ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"
- "ä¸ºä»€ä¹ˆéœ€è¦ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ"
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„ç‰¹ç‚¹"
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„åº”ç”¨"
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„ä¼˜åŠ¿"
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿçš„ç¼ºç‚¹"

### æ··åˆæ£€ç´¢å™¨ (HybridRetriever)

#### èåˆç­–ç•¥
1. **åŠ æƒå¹³å‡ (weighted_average)**
   - å‘é‡åˆ†æ•° Ã— æƒé‡1 + BM25åˆ†æ•° Ã— æƒé‡2
   - é€‚ç”¨äºéœ€è¦å¹³è¡¡è¯­ä¹‰å’Œå…³é”®è¯çš„åœºæ™¯

2. **å€’æ’åºèåˆ (RRF)**
   - åŸºäºæ’åçš„èåˆç®—æ³•
   - é€‚ç”¨äºç»“æœè´¨é‡å·®å¼‚è¾ƒå¤§çš„åœºæ™¯

3. **CondorcetæŠ•ç¥¨**
   - å¤šæ•°æŠ•ç¥¨æœºåˆ¶
   - é€‚ç”¨äºéœ€è¦å…±è¯†ç»“æœçš„åœºæ™¯

#### ä½¿ç”¨ç¤ºä¾‹
```python
from modules.retrieval.hybrid_retriever import HybridRetriever
from modules.retrieval.vector_store import VectorStore
from modules.retrieval.bm25_retriever import BM25Retriever

# åˆ›å»ºæ£€ç´¢å™¨
vector_store = VectorStore()
bm25_retriever = BM25Retriever()

# æ·»åŠ æ–‡æ¡£
documents = [
    {'text': 'äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯', 'start': 0.0, 'end': 5.0},
    {'text': 'æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„å­é¢†åŸŸ', 'start': 5.0, 'end': 10.0}
]
vector_store.add_documents(documents)
bm25_retriever.add_documents(documents)

# åˆ›å»ºæ··åˆæ£€ç´¢å™¨
hybrid_retriever = HybridRetriever(
    vector_store=vector_store,
    bm25_retriever=bm25_retriever,
    fusion_method="weighted_average",
    vector_weight=0.6,
    bm25_weight=0.4
)

# æ‰§è¡Œæ£€ç´¢
results = hybrid_retriever.search("äººå·¥æ™ºèƒ½", top_k=5)
for result in results:
    print(f"æ–‡æœ¬: {result['text']}")
    print(f"èåˆåˆ†æ•°: {result['score']:.3f}")
    print(f"å‘é‡åˆ†æ•°: {result['similarity']:.3f}")
    print(f"BM25åˆ†æ•°: {result['bm25_score']:.3f}")
```

### QAç³»ç»Ÿ (ConversationChain)

#### åŠŸèƒ½ç‰¹ç‚¹
- **å¤šè½®å¯¹è¯**: æ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„è¿ç»­å¯¹è¯
- **è®°å¿†ç®¡ç†**: çŸ­æœŸç¼“å†²åŒº + é•¿æœŸçŸ¥è¯†å­˜å‚¨
- **æç¤ºæ¨¡æ¿**: æ”¯æŒfew-shotå­¦ä¹ çš„åŠ¨æ€æç¤º
- **LLMé›†æˆ**: æ”¯æŒè®¯é£æ˜Ÿç«ã€OpenAIç­‰å¤šç§API

#### é…ç½®ç¤ºä¾‹
```yaml
# config/model_config.yaml
llm:
  provider: "openai"
  openai:
    api_key: "your_api_key"
    model_name: "xop3qwen1b7"
    base_url: "https://maas-api.cn-huabei-1.xf-yun.com/v2"
    max_tokens: 4096
    temperature: 0.7

retrieval:
  hybrid:
    fusion_method: "weighted_average"
    vector_weight: 0.6
    bm25_weight: 0.4
    top_k: 5
  
  multi_query:
    max_queries: 10
    similarity_threshold: 0.7

memory:
  type: "buffer"
  max_size: 100
  persistence: true
```

#### ä½¿ç”¨ç¤ºä¾‹
```python
from modules.qa.conversation_chain import ConversationChain
from modules.retrieval.hybrid_retriever import HybridRetriever

# åˆ›å»ºQAç³»ç»Ÿ
conversation_chain = ConversationChain()

# è¿›è¡Œå¯¹è¯
response = conversation_chain.chat("ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ")
print(f"AIå›ç­”: {response['response']}")
print(f"æ£€ç´¢åˆ° {len(response['retrieved_docs'])} ä¸ªç›¸å…³æ–‡æ¡£")

# è·å–å¯¹è¯å†å²
history = conversation_chain.get_conversation_history()
```

## æ€§èƒ½ä¼˜åŒ–

### GPUåŠ é€Ÿ
ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨å¯ç”¨çš„è®¡ç®—è®¾å¤‡ï¼š
- CUDA (NVIDIA GPU)
- MPS (Apple Silicon GPU)
- CPU (é»˜è®¤)

### æœ¬åœ°æ¨¡å‹ç¼“å­˜
- **å‘é‡æ¨¡å‹**: è‡ªåŠ¨ç¼“å­˜åˆ° `models/sentence-transformers/`
- **Whisperæ¨¡å‹**: è‡ªåŠ¨ç¼“å­˜åˆ° `models/whisper/`
- **ç¦»çº¿è¿è¡Œ**: ç¼“å­˜åå®Œå…¨æ— éœ€ç½‘ç»œè¿æ¥

### æ€§èƒ½æŒ‡æ ‡
- **å¤šæŸ¥è¯¢ç”Ÿæˆ**: ~0.03ç§’
- **å‘é‡æ£€ç´¢**: ~0.01ç§’
- **BM25æ£€ç´¢**: ~0.001ç§’
- **LLMå“åº”**: ~2-3ç§’ (å–å†³äºAPI)

## å¼€å‘æŒ‡å—

### é¡¹ç›®å½“å‰çŠ¶æ€
- **å·²å®Œæˆ**: è§†é¢‘å¤„ç†ã€éŸ³é¢‘æå–ã€Whisperè¯­éŸ³è¯†åˆ«ã€æ–‡æœ¬å¤„ç†ã€å‘é‡å­˜å‚¨ã€BM25æ£€ç´¢ã€å¤šæŸ¥è¯¢ç”Ÿæˆã€æ··åˆæ£€ç´¢ã€QAç³»ç»Ÿ
- **å¾…å¼€å‘**: Webéƒ¨ç½²ã€é…ç½®æ–‡ä»¶å®Œå–„ã€é«˜çº§è®°å¿†åŠŸèƒ½

### ä»£ç è§„èŒƒ
- ä½¿ç”¨Python 3.10+ç±»å‹æç¤º
- éµå¾ªPEP 8ä»£ç é£æ ¼
- æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- ç¼–å†™å•å…ƒæµ‹è¯•

### å¼€å‘è§„èŒƒ
1. **TodoListå®¡æŸ¥åˆ¶åº¦**: å¼€å‘å‰å¿…é¡»æä¾›è¯¦ç»†è®¡åˆ’
2. **é€æ­¥å¼€å‘åŸåˆ™**: ä¸¥æ ¼æŒ‰æ­¥éª¤å®Œæˆï¼Œæ¯æ­¥ç­‰å¾…å®¡æŸ¥
3. **æµ‹è¯•é©±åŠ¨**: å®ŒæˆåŠŸèƒ½åç¼–å†™å•å…ƒæµ‹è¯•
4. **å˜æ›´å®¡æ‰¹**: é‡è¦æ“ä½œéœ€æå‰å‘ŠçŸ¥å¹¶è·å¾—åŒæ„

## å¸¸è§é—®é¢˜è§£å†³

### 1. BM25åˆ†è¯è­¦å‘Š
```
è­¦å‘Š: jiebaæœªå®‰è£…ï¼Œä¸­æ–‡åˆ†è¯åŠŸèƒ½å°†å—é™
è§£å†³: pip install jieba nltk
```

### 2. APIè°ƒç”¨å¤±è´¥
```
é”™è¯¯: è®¯é£æ˜Ÿç«APIè°ƒç”¨å¤±è´¥
è§£å†³: æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥
```

### 3. æ¨¡å‹åŠ è½½æ…¢
```
é—®é¢˜: é¦–æ¬¡åŠ è½½æ¨¡å‹è¾ƒæ…¢
è§£å†³: æ¨¡å‹ä¼šè‡ªåŠ¨ç¼“å­˜ï¼Œåç»­åŠ è½½æ›´å¿«
```

## æ‰©å±•æ€§

ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•ï¼š
- **æ–°æ£€ç´¢ç®—æ³•**: åœ¨HybridRetrieverä¸­æ·»åŠ æ–°çš„èåˆæ–¹æ³•
- **æ–°LLMæ”¯æŒ**: åœ¨ConversationChainä¸­æ·»åŠ æ–°çš„APIé€‚é…å™¨
- **æ–°è®°å¿†ç±»å‹**: åœ¨Memoryæ¨¡å—ä¸­å®ç°æ–°çš„å­˜å‚¨ç­–ç•¥
- **æ–°æŸ¥è¯¢æ‰©å±•**: åœ¨MultiQueryGeneratorä¸­æ·»åŠ æ–°çš„æ‰©å±•ç­–ç•¥

## é¡¹ç›®è¿›å±•æ€»ç»“

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

#### å¤šæŸ¥è¯¢ç”Ÿæˆç³»ç»Ÿ
- **æ¨¡å‹æ‰©å±•å™¨**: åŸºäºsentence-transformersçš„è¯­ä¹‰æ‰©å±•
- **æ™ºèƒ½æƒé‡ç®¡ç†**: è‡ªåŠ¨å½’ä¸€åŒ–å’Œè°ƒæ•´æŸ¥è¯¢æƒé‡
- **å¤šè¯­è¨€æ”¯æŒ**: ä¸­è‹±æ–‡æŸ¥è¯¢æ¨¡æ¿è‡ªåŠ¨åˆ‡æ¢
- **æœ¬åœ°ç¼“å­˜**: 87.4MBæ¨¡å‹æ–‡ä»¶æœ¬åœ°ç¼“å­˜

#### æ··åˆæ£€ç´¢ç³»ç»Ÿ
- **ä¸‰ç§èåˆç­–ç•¥**: åŠ æƒå¹³å‡ã€RRFã€Condorcet
- **å¹¶è¡Œæ£€ç´¢**: å‘é‡å’ŒBM25åŒæ—¶æ‰§è¡Œ
- **ç»“æœç»Ÿä¸€**: è‡ªåŠ¨æå–å¸¸ç”¨å­—æ®µï¼Œä¿æŒå‘åå…¼å®¹
- **ç´¢å¼•æŒä¹…åŒ–**: æ”¯æŒä¿å­˜å’ŒåŠ è½½æ··åˆç´¢å¼•

#### QAé—®ç­”ç³»ç»Ÿ
- **å®Œæ•´å¯¹è¯é“¾**: å¤šæŸ¥è¯¢â†’æ£€ç´¢â†’LLMç”Ÿæˆæµç¨‹
- **è®°å¿†ç®¡ç†**: ç¼“å†²åŒºè®°å¿†+æŒä¹…åŒ–å­˜å‚¨
- **æç¤ºæ¨¡æ¿**: æ”¯æŒfew-shotå­¦ä¹ çš„åŠ¨æ€æ¨¡æ¿
- **APIé›†æˆ**: è®¯é£æ˜Ÿç«APIå®Œæ•´æ”¯æŒ

#### æµ‹è¯•è¦†ç›–
- **21ä¸ªå¤šæŸ¥è¯¢æµ‹è¯•**: 100%é€šè¿‡
- **13ä¸ªæ··åˆæ£€ç´¢æµ‹è¯•**: 100%é€šè¿‡
- **QAç³»ç»Ÿé›†æˆæµ‹è¯•**: å®Œæ•´åŠŸèƒ½éªŒè¯

### ğŸ“Š æŠ€æœ¯æ ˆé…ç½®

#### æ ¸å¿ƒä¾èµ–
- **PyTorch 2.5.0+**: æ·±åº¦å­¦ä¹ æ¡†æ¶
- **Sentence-Transformers**: å¤šè¯­è¨€æ–‡æœ¬å‘é‡åŒ–
- **OpenAI Whisper**: 99ç§è¯­è¨€è¯­éŸ³è¯†åˆ«
- **è®¯é£æ˜Ÿç«API**: ä¸­æ–‡ä¼˜åŒ–çš„å¤§è¯­è¨€æ¨¡å‹
- **SciPy**: é«˜æ•ˆå‘é‡è®¡ç®—

#### æ¨¡å‹æ–‡ä»¶
- **all-MiniLM-L6-v2**: 87.4MBï¼Œå·²æœ¬åœ°ç¼“å­˜
- **Whisperç³»åˆ—**: æŒ‰éœ€ä¸‹è½½ï¼Œæ”¯æŒ5ç§å¤§å°

### ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿

1. **æ™ºèƒ½åŒ–**: åŸºäºè¯­ä¹‰ç†è§£çš„æŸ¥è¯¢æ‰©å±•ï¼Œæ— éœ€äººå·¥ç»´æŠ¤è¯å…¸
2. **é«˜æ•ˆæ€§**: å¤šæŸ¥è¯¢å¹¶è¡Œæ£€ç´¢ï¼Œæ¯«ç§’çº§å“åº”
3. **å‡†ç¡®æ€§**: æ··åˆæ£€ç´¢èåˆè¯­ä¹‰å’Œå…³é”®è¯åŒ¹é…
4. **å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
5. **ç¦»çº¿å‹å¥½**: æœ¬åœ°æ¨¡å‹ç¼“å­˜ï¼Œå‡å°‘ç½‘ç»œä¾èµ–

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚